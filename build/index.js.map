{"version":3,"sources":["webpack:///webpack/bootstrap a252df59b549a7373438","webpack:///./src/index.js","webpack:///external \"request-promise\"","webpack:///external \"lodash\"","webpack:///external \"better-assert\""],"names":[],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a252df59b549a7373438\n **/","import rp from \"request-promise\";\nimport lo from \"lodash\";\nimport assert from \"better-assert\";\n\n//rp.debug = true;\n\n///////////////////////////////////////////////////////////////////\n//\n//                       POINT FORMAT\n//\n///////////////////////////////////////////////////////////////////\n/*\n\n[\n    {\n        measurement: \"cpu_load\",\n        time: 1434311740594,\n        value: 40.3\n        tags:{\"host\":\"kube_minion_3\", core:\"3\"}\n    },\n    {\n        measurement: \"cpu_load\",\n        time: 1434311744000,\n        value: 21.1\n        tags:{\"host\":\"kube_minion_3\", core:\"3\"}\n    }\n]\n\n*/\n\n///////////////////////////////////////////////////////////////////\n//\n//                          API\n//\n///////////////////////////////////////////////////////////////////\n\nexport var put = function put(endpoint, database_name, points) {\n\n    if(!endpoint)       throw new Error(\"endpoint is required\")\n    if(!database_name)  throw new Error(\"database_name is required\")\n    if(!points)         throw new Error(\"points is required\")\n\n    var body = lo.map(points, (p)=>{\n        return formatPoint(p);\n    }).join(\"\\n\")\n\n    var options = {\n        method: 'POST',\n        qs: {db: database_name, precision:\"ms\"},\n        url: `${endpoint}/write`,\n        resolveWithFullResponse: true,\n        body:body\n    }\n\n    return rp(options)\n    .then((request)=>{\n        bodyCheck(request.body)\n        return request;\n    })\n}\n\nexport var create = function create(endpoint, user, pass, name) {\n\n    var options = {\n        method: 'GET',\n        uri: `${endpoint}/query?q=CREATE DATABASE ${name}`,\n        resolveWithFullResponse: true\n    }\n\n    return rp(options)\n    .then((request)=>{\n        bodyCheck(request.body)\n        return request;\n    })\n}\n\nexport var drop = function drop(endpoint, user, pass, name) {\n\n    var options = {\n        method: 'GET',\n        uri: `${endpoint}/query?q=DROP DATABASE ${name}`,\n        resolveWithFullResponse: true\n    }\n\n    return rp(options)\n    .then((request)=>{\n        bodyCheck(request.body)\n        return request;\n    })\n}\n\n\nexport var showMeasurements = function showMeasurements(endpoint, user, pass) {\n\n\n    var options = {\n        method: 'GET',\n        uri: `${endpoint}/query?q=SHOW MEASUREMENTS`,\n    }\n\n    return rp(options)\n    .then((request)=>{\n        bodyCheck(request.body)\n        return request;\n    })\n}\n\n///////////////////////////////////////////////////////////////////\n//\n//                          HELPERS\n//\n///////////////////////////////////////////////////////////////////\n\n//not using this function right now\nfunction autoParse(body, response) {\n    // FIXME: The content type string could contain additional values like the charset.\n    if (response.headers['content-type'] === 'application/json') {\n        return JSON.parse(body);\n    } else {\n        return body;\n    }\n}\n\nexport var formatPoint = function formatPoint(p) {\n    var kv_pairs = lo.map(p.tags, (v,k)=>{\n        return `${k}=${v}`\n    }).join(\",\")\n\n    return `${p.measurement},${kv_pairs} value=${p.value} ${p.time}`\n}\n\n// we need to look in the body for errors as the influxdb api\n// hides errors e.g. it gives a status code of 200 but an error in the body\nvar bodyCheck = function bodyCheck(body) {\n    if(body) {\n        body = JSON.parse(body);\n    } else {\n        return;\n    }\n\n    if(body.results && body.results[0] && body.results[0].error) throw new Error(body.results[0].error);\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","module.exports = require(\"request-promise\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"request-promise\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = require(\"lodash\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"lodash\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = require(\"better-assert\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"better-assert\"\n ** module id = 3\n ** module chunks = 0\n **/"],"sourceRoot":""}